pipeline {
    agent any

    stages {
        stage('build'){
            steps{
                bat "mvn clean compile"
            }
            post{
                always  {
                    echo "build stage finished!"
                }
                changed {
                    echo "du changement en build"
                }
                failure {
                    echo "pas bon le build"
                }
                success {
                    echo "1 gommette pour le build"
                }
            }
        }

        stage('test'){
            steps{
                bat "mvn test"
            }
        }
        stage('package'){
            steps{
                bat "mvn -DskipTests package"
            }
        }
        stage('deliver'){
            steps{
                echo "TODO : deliver"
            }
        }
        
    post{
                always  {
                    echo "pipeline finished!"
                }
                changed {
                    echo "du changement dans le pipeline"
                }
                failure {
                    echo "pas bon le pipeline"
                }
                success {
                    echo "1 super gommette pour la pipeline"
                }
            }
}
